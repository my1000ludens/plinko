<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My 1000 Ludens</title>
    
    <script type="module" crossorigin>
var B=Object.defineProperty;var C=(n,s,t)=>s in n?B(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var o=(n,s,t)=>(C(n,typeof s!="symbol"?s+"":s,t),t);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}})();class S{constructor(s,t){o(this,"x");o(this,"y");this.x=s,this.y=t}update(s){throw new Error("Not implemented")}render(s){throw new Error("Not implemented")}}class y extends S{constructor(t,i,e=0,r=0,h=0,d=0,c=10){super(t,i);o(this,"dx");o(this,"dy");o(this,"ddx");o(this,"ddy");o(this,"radius");this.x=t,this.y=i,this.dx=e,this.dy=r,this.ddx=h,this.ddy=d,this.radius=c}force(t,i){return this.ddx+=t,this.ddy+=i,this}collideWith(t,i){const e=this.x+this.dx*t,r=this.y+this.dy*t,h=i.x+i.dx*t,d=i.y+i.dy*t,c=Math.sqrt((e-h)**2+(r-d)**2),u=Math.sqrt((this.x-i.x)**2+(this.y-i.y)**2);if(c<=this.radius+i.radius){const[l,p]=[this.x-i.x,this.y-i.y],[a,f]=[l/u,p/u],[m,x]=[this.dx,this.dy],[w,L]=[i.dx,i.dy],g=(m*a+x*f)*.8,E=(w*a+L*f)*.8,[A,M]=[g*a,g*f],[I,N]=[E*a,E*f],[O,q]=[m-A*2,x-M*2],[v,X]=[w-I*2,L-N*2];this.dx=O,this.dy=q,i.dx=v,i.dy=X}return this}update(t){this.x+=this.dx*t,this.y+=this.dy*t,this.dx+=this.ddx*t,this.dy+=this.ddy*t}render(t){throw new Error("Not implemented")}}class W extends y{constructor(t,i,e){super(t,i,0,0,0,0,e);o(this,"radius");this.x=t,this.y=i,this.radius=e}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle="black",t.fill(),t.closePath()}}class k extends y{constructor(t,i,e,r){super(t,i);o(this,"rows");o(this,"pinList");o(this,"radius");this.rows=e,this.pinList=[];const h=D(e),d=r/(e+1);this.radius=d*.125;let c=3,u=c,[l,p]=[t-d,i];for(let a=0;a<h;a++)this.pinList.push(new W(l,p,this.radius)),l+=d,u-=1,u===0&&(c++,u=c,l=l-d*c+d/2,p=p+d*Math.sqrt(3)/2)}collideWith(t,i){return this.pinList.forEach(e=>e.collideWith(t,i)),this}update(t){this.pinList.forEach(i=>i.update(t))}render(t){this.pinList.forEach(i=>i.render(t))}}const D=n=>{if(n<0)throw new Error("Rows must be positive");return(n+5)*n/2};class b extends y{constructor(s,t,i=10){super(s,t,0,0,0,0,i)}render(s){s.beginPath(),s.arc(this.x,this.y,this.radius,0,2*Math.PI),s.fillStyle="gray",s.fill(),s.closePath()}}class F{constructor(s){o(this,"atomList");o(this,"ctx");this.atomList=[],this.ctx=s}run(){let t=performance.now();const i=async()=>{const e=performance.now(),r=Math.min(e-t,200);t+=r,this.update(r/1e3),this.render(this.ctx),requestAnimationFrame(i)};requestAnimationFrame(i)}add(s){this.atomList.push(s)}sub(s){this.atomList=this.atomList.filter(t=>t!==s)}update(s){const t=this.atomList.find(e=>e instanceof y);this.atomList.filter(e=>e instanceof b).forEach(e=>t.collideWith(s,e)),this.atomList.forEach(e=>e.update(s))}render(s){s.clearRect(0,0,s.canvas.width,s.canvas.height),this.atomList.forEach(t=>t.render(s))}}const P=n=>{const{width:s,height:t}=window.getComputedStyle(n);n.width=parseInt(s)*2,n.height=parseInt(t)*2};(()=>{const n=document.getElementById("app");P(n),window.addEventListener("resize",()=>P(n));const s=n.width,t=n.height,i=n.getContext("2d"),e=new F(i);e.run();const r=new k(s*.5,t*.3,20,s*.8);e.add(r),window.addEventListener("keydown",h=>{if(h.keyCode===32){const[d,c]=[s*.5+s*.02,t*.25];e.add(new b(d,c,r.radius*2).force(0,1e3))}})})();

</script>
    <style>
body{font-family:-apple-system,BlinkMacSystemFont,sans-serif}#app{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:50rem;height:70rem}

</style>
  </head>
  <body>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QY8Q10SGTD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QY8Q10SGTD');
    </script>
    <canvas id="app"></canvas>
    
  </body>
</html>
